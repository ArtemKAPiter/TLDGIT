(()=>{var e={258:e=>{!function(t){e.exports=t;var r={on:function(e,t){return i(this,e).push(t),this},once:function(e,t){var r=this;return o.originalListener=t,i(r,e).push(o),r;function o(){n.call(r,e,o),t.apply(this,arguments)}},off:n,emit:function(e,t){var r=this,o=i(r,e,!0);if(!o)return!1;var n=arguments.length;if(1===n)o.forEach(u);else if(2===n)o.forEach(c);else{var a=Array.prototype.slice.call(arguments,1);o.forEach(s)}return!!o.length;function u(e){e.call(r)}function c(e){e.call(r,t)}function s(e){e.apply(r,a)}}};function o(e){for(var t in r)e[t]=r[t];return e}function n(e,t){var r,o=this;if(arguments.length){if(t){if(r=i(o,e,!0)){if(!(r=r.filter(a)).length)return n.call(o,e);o.listeners[e]=r}}else if((r=o.listeners)&&(delete r[e],!Object.keys(r).length))return n.call(o)}else delete o.listeners;return o;function a(e){return e!==t&&e.originalListener!==t}}function i(e,t,r){if(!r||e.listeners){var o=e.listeners||(e.listeners={});return o[t]||(o[t]=[])}}o(t.prototype),t.mixin=o}((function e(){if(!(this instanceof e))return new e}))}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e={VK:"vk",YANDEX:"yandex",TGG:"tgg",MOCK:"mock"},t={PLATFORM:"platform",PLAYER:"player",GAME:"game",STORAGE:"storage",ADVERTISEMENT:"advertisement",SOCIAL:"social",DEVICE:"device",LEADERBOARD:"leaderboard"},o={INTERSTITIAL_STATE_CHANGED:"interstitial_state_changed",REWARDED_STATE_CHANGED:"rewarded_state_changed",VISIBILITY_STATE_CHANGED:"visibility_state_changed"},n={VISIBLE:"visible",HIDDEN:"hidden"},i={OPENED:"opened",CLOSED:"closed",FAILED:"failed"},a={OPENED:"opened",CLOSED:"closed",FAILED:"failed",REWARDED:"rewarded"},u="initialize",c="authorize_player",s="show_interstitial",l="show_rewarded",f="add_to_home_screen",p="rate",y="set_leaderboard_score",h="get_leaderboard_score",d="get_leaderboard_entries",m={LOCAL_STORAGE:"local_storage",PLATFORM_INTERNAL:"platform_internal"},v={message:"Storage not supported"};function g(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function b(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function _(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,w(e,t,"set"),r),r}function S(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,w(e,t,"get"))}function w(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var P=new WeakMap,k=new WeakMap,O=new WeakMap;const E=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,P,{writable:!0,value:void 0}),b(this,k,{writable:!0,value:void 0}),b(this,O,{writable:!0,value:void 0}),_(this,P,new Promise((function(e,r){_(t,k,e),_(t,O,r)})))}var t,r;return t=e,(r=[{key:"promise",get:function(){return S(this,P)}},{key:"resolve",value:function(e){S(this,k).call(this,e)}},{key:"reject",value:function(e){S(this,O).call(this,e)}}])&&g(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var j=r(258),D=r.n(j);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function R(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var C=new WeakMap,B=function(){function t(e){var r,i,a,u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),I(this,"_isInitialized",!1),I(this,"_platformSdk",null),I(this,"_isPlayerAuthorized",!1),I(this,"_playerId",null),I(this,"_playerName",null),I(this,"_playerPhotos",[]),I(this,"_visibilityState",null),I(this,"_localStorage",null),I(this,"_defaultStorageType",m.LOCAL_STORAGE),I(this,"_platformStorageCachedData",null),I(this,"_interstitialState",null),I(this,"_rewardedState",null),a={writable:!0,value:{}},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,i=C),i.set(r,a);try{this._localStorage=window.localStorage}catch(e){}this._visibilityState="visible"===document.visibilityState?n.VISIBLE:n.HIDDEN,document.addEventListener("visibilitychange",(function(){u._visibilityState="visible"===document.visibilityState?n.VISIBLE:n.HIDDEN,u.emit(o.VISIBILITY_STATE_CHANGED,u._visibilityState)})),e&&(this._options=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))}var r,u;return r=t,(u=[{key:"platformId",get:function(){return e.MOCK}},{key:"platformSdk",get:function(){return this._platformSdk}},{key:"platformLanguage",get:function(){var e=navigator.language;return"string"==typeof e?e.substring(0,2):"en"}},{key:"platformPayload",get:function(){return new URL(window.location.href).searchParams.get("payload")}},{key:"visibilityState",get:function(){return this._visibilityState}},{key:"isPlayerAuthorizationSupported",get:function(){return!1}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"playerId",get:function(){return this._playerId}},{key:"playerName",get:function(){return this._playerName}},{key:"playerPhotos",get:function(){return this._playerPhotos}},{key:"defaultStorageType",get:function(){return this._defaultStorageType}},{key:"interstitialState",get:function(){return this._interstitialState}},{key:"rewardedState",get:function(){return this._rewardedState}},{key:"isInviteFriendsSupported",get:function(){return!1}},{key:"isJoinCommunitySupported",get:function(){return!1}},{key:"isShareSupported",get:function(){return!1}},{key:"isCreatePostSupported",get:function(){return!1}},{key:"isAddToHomeScreenSupported",get:function(){return!1}},{key:"isAddToFavoritesSupported",get:function(){return!1}},{key:"isRateSupported",get:function(){return!1}},{key:"deviceType",get:function(){if(navigator&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if(/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(e))return"mobile";if(/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(e))return"tablet"}return"desktop"}},{key:"isLeaderboardSupported",get:function(){return!1}},{key:"isLeaderboardNativePopupSupported",get:function(){return!1}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return!1}},{key:"isLeaderboardSetScoreSupported",get:function(){return!1}},{key:"isLeaderboardGetScoreSupported",get:function(){return!1}},{key:"isLeaderboardGetEntriesSupported",get:function(){return!1}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"authorizePlayer",value:function(e){return Promise.reject()}},{key:"isStorageSupported",value:function(e){return e===m.LOCAL_STORAGE&&null!==this._localStorage}},{key:"getDataFromStorage",value:function(e,t){if(t===m.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var r=[],o=0;o<e.length;o++)r.push(this._getDataFromLocalStorage(e[o]));return Promise.resolve(r)}var n=this._getDataFromLocalStorage(e);return Promise.resolve(n)}return Promise.reject(v)}return Promise.reject(v)}},{key:"setDataToStorage",value:function(e,t,r){if(r===m.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var o=0;o<e.length;o++)this._setDataToLocalStorage(e[o],t[o]);return Promise.resolve()}return this._setDataToLocalStorage(e,t),Promise.resolve()}return Promise.reject(v)}return Promise.reject(v)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===m.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var r=0;r<e.length;r++)this._deleteDataFromLocalStorage(e[r]);return Promise.resolve()}return this._deleteDataFromLocalStorage(e),Promise.resolve()}return Promise.reject(v)}return Promise.reject(v)}},{key:"showInterstitial",value:function(){return Promise.reject()}},{key:"showRewarded",value:function(){return Promise.reject()}},{key:"inviteFriends",value:function(){return Promise.reject()}},{key:"joinCommunity",value:function(){return Promise.reject()}},{key:"share",value:function(){return Promise.reject()}},{key:"createPost",value:function(e){return Promise.reject()}},{key:"addToHomeScreen",value:function(){return Promise.reject()}},{key:"addToFavorites",value:function(){return Promise.reject()}},{key:"rate",value:function(){return Promise.reject()}},{key:"setLeaderboardScore",value:function(e){return Promise.reject()}},{key:"getLeaderboardScore",value:function(e){return Promise.reject()}},{key:"getLeaderboardEntries",value:function(e){return Promise.reject()}},{key:"showLeaderboardNativePopup",value:function(e){return Promise.reject()}},{key:"_getDataFromLocalStorage",value:function(e){var t=this._localStorage.getItem(e);if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}return t}},{key:"_setDataToLocalStorage",value:function(e,t){"object"===A(t)&&(t=JSON.stringify(t)),this._localStorage.setItem(e,t)}},{key:"_deleteDataFromLocalStorage",value:function(e){this._localStorage.removeItem(e)}},{key:"_setInterstitialState",value:function(e){this._interstitialState===e&&e!==i.FAILED||(this._interstitialState=e,this.emit(o.INTERSTITIAL_STATE_CHANGED,this._interstitialState))}},{key:"_setRewardedState",value:function(e){this._rewardedState===e&&e!==a.FAILED||(this._rewardedState=e,this.emit(o.REWARDED_STATE_CHANGED,this._rewardedState))}},{key:"_canShowAdvertisement",value:function(){return!(this._interstitialState&&this._interstitialState===i.OPENED||this._rewardedState&&(this._rewardedState===a.OPENED||this._rewardedState===a.REWARDED))}},{key:"_createPromiseDecorator",value:function(e){var t=new E;return L(this,C)[e]=t,t}},{key:"_getPromiseDecorator",value:function(e){return L(this,C)[e]}},{key:"_resolvePromiseDecorator",value:function(e,t){L(this,C)[e]&&(L(this,C)[e].resolve(t),delete L(this,C)[e])}},{key:"_rejectPromiseDecorator",value:function(e,t){L(this,C)[e]&&(L(this,C)[e].reject(t),delete L(this,C)[e])}}])&&R(r.prototype,u),Object.defineProperty(r,"prototype",{writable:!1}),t}();D().mixin(B.prototype);const N=B;var F=function(e){return new Promise((function(t){var r=document.createElement("script");r.src=e,r.addEventListener("load",t),document.head.appendChild(r)}))};function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function W(){return W="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=x(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},W.apply(this,arguments)}function x(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}function V(e,t){return V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},V(e,t)}function H(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return K(e)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function Y(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function U(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var J=new WeakSet;function X(e,t){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"result",i=this._getPromiseDecorator(e);return i||(i=this._createPromiseDecorator(e),this._platformSdk.send(t,o).then((function(t){t[n]?r._resolvePromiseDecorator(e):r._rejectPromiseDecorator(e)})).catch((function(t){r._rejectPromiseDecorator(e,t)}))),i.promise}const Q=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(y,t);var r,o,n,c,p=(n=y,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(n);if(c){var r=q(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return H(this,e)});function y(){var e;z(this,y);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return Y(K(e=p.call.apply(p,[this].concat(r))),J),e}return r=y,(o=[{key:"platformId",get:function(){return e.VK}},{key:"platformLanguage",get:function(){var e=new URL(window.location.href);if(e.searchParams.has("language")){var t=e.searchParams.get("language");try{t=parseInt(t)}catch(e){}switch(t){case 0:return"ru";case 1:return"uk";case 2:return"be";case 3:return"en"}}return W(q(y.prototype),"platformLanguage",this)}},{key:"platformPayload",get:function(){var e=new URL(window.location.href);return e.searchParams.has("hash")?e.searchParams.get("hash"):W(q(y.prototype),"platformPayload",this)}},{key:"deviceType",get:function(){var e=new URL(window.location.href);if(e.searchParams.has("platform"))switch(e.searchParams.get("platform")){case"html5_ios":case"html5_android":case"html5_mobile":return"mobile";case"web":return"desktop"}return W(q(y.prototype),"deviceType",this)}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){var e=new URL(window.location.href);return!(!e.searchParams.has("platform")||"html5_android"!==e.searchParams.get("platform"))}},{key:"isAddToFavoritesSupported",get:function(){return!0}},{key:"isLeaderboardSupported",get:function(){return!0}},{key:"isLeaderboardNativePopupSupported",get:function(){return"mobile"===this.deviceType}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(u);return t||(t=this._createPromiseDecorator(u),F("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function(){e._platformSdk=window.vkBridge,e._platformSdk.send("VKWebAppInit").then((function(){e._platformSdk.send("VKWebAppGetUserInfo").then((function(t){t&&(e._playerId=t.id,e._playerName=t.first_name+" "+t.last_name,t.photo_100&&e._playerPhotos.push(t.photo_100),t.photo_200&&e._playerPhotos.push(t.photo_200),t.photo_max_orig&&e._playerPhotos.push(t.photo_max_orig))})).finally((function(){e._isInitialized=!0,e._defaultStorageType=m.PLATFORM_INTERNAL,e._resolvePromiseDecorator(u)}))}))}))),t.promise}},{key:"authorizePlayer",value:function(e){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===m.PLATFORM_INTERNAL||W(q(y.prototype),"isStorageSupported",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t){var r=this;return t===m.PLATFORM_INTERNAL?new Promise((function(t,o){var n=Array.isArray(e)?e:[e];r._platformSdk.send("VKWebAppStorageGet",{keys:n}).then((function(r){if(Array.isArray(e)){for(var o=[],n=0;n<e.length;n++)if(""!==r.keys[n].value){var i=void 0;try{i=JSON.parse(r.keys[n].value)}catch(e){i=r.keys[n].value}o.push(i)}else o.push(null);t(o)}else if(""!==r.keys[0].value){var a;try{a=JSON.parse(r.keys[0].value)}catch(e){a=r.keys[0].value}t(a)}else t(null)})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?o(e.error_data.error_reason):o()}))})):W(q(y.prototype),"getDataFromStorage",this).call(this,e,t)}},{key:"setDataToStorage",value:function(e,t,r){var o=this;if(r===m.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var n=[],i=0;i<e.length;i++){var a={key:e[i],value:t[i]};"string"!=typeof t[i]&&(a.value=JSON.stringify(t[i])),n.push(this._platformSdk.send("VKWebAppStorageSet",a))}return Promise.all(n)}var u={key:e,value:t};return"string"!=typeof t&&(u.value=JSON.stringify(t)),new Promise((function(e,t){o._platformSdk.send("VKWebAppStorageSet",u).then((function(){e()})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?t(e.error_data.error_reason):t()}))}))}return W(q(y.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===m.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var r=[],o=0;o<e.length;o++)r.push(this.setDataToStorage(e[o],"",t));return Promise.all(r)}return this.setDataToStorage(e,"",t)}return W(q(y.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;return this._canShowAdvertisement()?U(this,J,X).call(this,s,"VKWebAppCheckNativeAds",{ad_format:"interstitial"}).then((function(){e._setInterstitialState(i.OPENED),e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"interstitial"}).then((function(t){e._setInterstitialState(t.result?i.CLOSED:i.FAILED)})).catch((function(){e._setInterstitialState(i.FAILED)}))})):Promise.reject()}},{key:"showRewarded",value:function(){var e=this;return this._canShowAdvertisement()?U(this,J,X).call(this,l,"VKWebAppCheckNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(){e._setRewardedState(a.OPENED),e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(){e._setRewardedState(a.FAILED)}))})):Promise.reject()}},{key:"inviteFriends",value:function(){return U(this,J,X).call(this,"invite_friends","VKWebAppShowInviteBox",{},"success")}},{key:"joinCommunity",value:function(e){if(!e||!e.groupId)return Promise.reject();var t=e.groupId;return"string"==typeof t&&(t=parseInt(t),isNaN(t))?Promise.reject():U(this,J,X).call(this,"join_community","VKWebAppJoinGroup",{group_id:t}).then((function(){window.open("https://vk.com/public"+t)}))}},{key:"share",value:function(e){var t={};return e&&e.link&&(t.link=e.link),U(this,J,X).call(this,"share","VKWebAppShare",t,"type")}},{key:"createPost",value:function(e){var t={};return e&&e.message&&(t.message=e.message),e&&e.attachments&&(t.attachments=e.attachments),U(this,J,X).call(this,"create_post","VKWebAppShowWallPostBox",t,"post_id")}},{key:"addToHomeScreen",value:function(){return this.isAddToHomeScreenSupported?U(this,J,X).call(this,f,"VKWebAppAddToHomeScreen"):Promise.reject()}},{key:"addToFavorites",value:function(){return U(this,J,X).call(this,"add_to_favorites","VKWebAppAddToFavorites")}},{key:"showLeaderboardNativePopup",value:function(e){if(!this.isLeaderboardNativePopupSupported)return Promise.reject();if(!e||!e.userResult)return Promise.reject();var t={user_result:e.userResult};return"boolean"==typeof e.global&&(t.global=e.global?1:0),U(this,J,X).call(this,"show_leaderboard_native_popup","VKWebAppShowLeaderBoardBox",t)}}])&&G(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),y}(N);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ne(){return ne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=ie(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},ne.apply(this,arguments)}function ie(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=se(e)););return e}function ae(e,t){return ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ae(e,t)}function ue(e,t){if(t&&("object"===Z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ce(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}function le(e,t){pe(e,t),t.add(e)}function fe(e,t,r){pe(e,t),t.set(e,r)}function pe(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ye(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,me(e,t,"set"),r),r}function he(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function de(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,me(e,t,"get"))}function me(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var ve=new WeakMap,ge=new WeakMap,be=new WeakMap,_e=new WeakSet;function Se(e){var t=this;return new Promise((function(r){var o={scopes:!0};e&&"boolean"==typeof e.scopes&&(o.scopes=e.scopes),t._platformSdk.getPlayer(o).then((function(e){t._playerId=e.getUniqueID(),t._isPlayerAuthorized="lite"!==e.getMode();var r=e.getName();""!==r&&(t._playerName=r),t._playerPhotos=[];var o=e.getPhoto("small"),n=e.getPhoto("medium"),i=e.getPhoto("large");o&&t._playerPhotos.push(o),n&&t._playerPhotos.push(n),i&&t._playerPhotos.push(i),ye(t,ge,e)})).finally((function(){r()}))}))}const we=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ae(e,t)}(b,t);var r,o,n,v,g=(n=b,v=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=se(n);if(v){var r=se(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ue(this,e)});function b(){var e;re(this,b);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return le(ce(e=g.call.apply(g,[this].concat(r))),_e),fe(ce(e),ve,{writable:!0,value:!1}),fe(ce(e),ge,{writable:!0,value:null}),fe(ce(e),be,{writable:!0,value:null}),e}return r=b,(o=[{key:"platformId",get:function(){return e.YANDEX}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.lang:ne(se(b.prototype),"platformLanguage",this)}},{key:"deviceType",get:function(){return this._platformSdk?this._platformSdk.deviceInfo.type:ne(se(b.prototype),"deviceType",this)}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return de(this,ve)}},{key:"isRateSupported",get:function(){return!0}},{key:"isLeaderboardSupported",get:function(){return!0}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return!0}},{key:"isLeaderboardSetScoreSupported",get:function(){return!0}},{key:"isLeaderboardGetScoreSupported",get:function(){return!0}},{key:"isLeaderboardGetEntriesSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(u);return t||(t=this._createPromiseDecorator(u),F("https://yandex.ru/games/sdk/v2").then((function(){window.YaGames.init().then((function(t){e._platformSdk=t;var r=he(e,_e,Se).call(e),o=e._platformSdk.getStorage().then((function(t){e._localStorage=t})),n=e._platformSdk.shortcut.canShowPrompt().then((function(t){ye(e,ve,t.canShow)})),i=e._platformSdk.getLeaderboards().then((function(t){ye(e,be,t)}));Promise.all([r,o,n,i]).finally((function(){e._isInitialized=!0,e._defaultStorageType=null===de(e,ge)?m.LOCAL_STORAGE:m.PLATFORM_INTERNAL,e._resolvePromiseDecorator(u)}))}))}))),t.promise}},{key:"authorizePlayer",value:function(e){var t=this,r=this._getPromiseDecorator(c);return r||(r=this._createPromiseDecorator(c),this._isPlayerAuthorized?he(this,_e,Se).call(this,e).then((function(){t._resolvePromiseDecorator(c)})):this._platformSdk.auth.openAuthDialog().then((function(){he(t,_e,Se).call(t,e).then((function(){t._resolvePromiseDecorator(c)}))})).catch((function(e){t._rejectPromiseDecorator(c,e)}))),r.promise}},{key:"isStorageSupported",value:function(e){return e===m.PLATFORM_INTERNAL?null!==de(this,ge):ne(se(b.prototype),"isStorageSupported",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t){var r=this;return t===m.PLATFORM_INTERNAL?new Promise((function(t,o){if(r._platformStorageCachedData){if(Array.isArray(e)){for(var n=[],i=0;i<e.length;i++){var a=void 0===r._platformStorageCachedData[e[i]]?null:r._platformStorageCachedData[e[i]];n.push(a)}return void t(n)}t(void 0===r._platformStorageCachedData[e]?null:r._platformStorageCachedData[e])}else de(r,ge)?de(r,ge).getData().then((function(o){if(r._platformStorageCachedData=o,Array.isArray(e)){for(var n=[],i=0;i<e.length;i++){var a=void 0===r._platformStorageCachedData[e[i]]?null:r._platformStorageCachedData[e[i]];n.push(a)}t(n)}else t(void 0===r._platformStorageCachedData[e]?null:r._platformStorageCachedData[e])})).catch((function(e){o(e)})):o()})):ne(se(b.prototype),"getDataFromStorage",this).call(this,e,t)}},{key:"setDataToStorage",value:function(e,t,r){var o=this;return r===m.PLATFORM_INTERNAL?new Promise((function(r,n){if(de(o,ge)){var i=null!==o._platformStorageCachedData?ee({},o._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;de(o,ge).setData(i).then((function(){o._platformStorageCachedData=i,r()})).catch((function(e){n(e)}))}else n()})):ne(se(b.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===m.PLATFORM_INTERNAL?new Promise((function(t,o){if(de(r,ge)){var n=null!==r._platformStorageCachedData?ee({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete n[e[i]];else delete n[e];de(r,ge).setData(n).then((function(){r._platformStorageCachedData=n,t()})).catch((function(e){o(e)}))}else o()})):ne(se(b.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;if(!this._canShowAdvertisement())return Promise.reject();var t=this._getPromiseDecorator(s);return t||(t=this._createPromiseDecorator(s),this._platformSdk.adv.showFullscreenAdv({callbacks:{onOpen:function(){e._resolvePromiseDecorator(s),e._setInterstitialState(i.OPENED)},onClose:function(t){t?e._setInterstitialState(i.CLOSED):(e._rejectPromiseDecorator(s),e._setInterstitialState(i.FAILED))}}})),t.promise}},{key:"showRewarded",value:function(){var e=this;if(!this._canShowAdvertisement())return Promise.reject();var t=this._getPromiseDecorator(l);return t||(t=this._createPromiseDecorator(l),this._platformSdk.adv.showRewardedVideo({callbacks:{onOpen:function(){e._resolvePromiseDecorator(l),e._setRewardedState(a.OPENED)},onRewarded:function(){e._setRewardedState(a.REWARDED)},onClose:function(){e._setRewardedState(a.CLOSED)},onError:function(t){e._rejectPromiseDecorator(l,t),e._setRewardedState(a.FAILED)}}})),t.promise}},{key:"addToHomeScreen",value:function(){var e=this;if(!this.isAddToHomeScreenSupported)return Promise.reject();var t=this._getPromiseDecorator(f);return t||(t=this._createPromiseDecorator(f),this._platformSdk.shortcut.showPrompt().then((function(t){"accepted"!==t.outcome?e._rejectPromiseDecorator(f):e._resolvePromiseDecorator(f)})).catch((function(t){e._rejectPromiseDecorator(f,t)}))),t.promise}},{key:"rate",value:function(){var e=this,t=this._getPromiseDecorator(p);return t||(t=this._createPromiseDecorator(p),this._platformSdk.feedback.canReview().then((function(t){t.value?e._platformSdk.feedback.requestReview().then((function(t){t.feedbackSent?e._resolvePromiseDecorator(p):e._rejectPromiseDecorator(p)})).catch((function(t){e._rejectPromiseDecorator(p,t)})):e._rejectPromiseDecorator(p,t.reason)})).catch((function(t){e._rejectPromiseDecorator(p,t)}))),t.promise}},{key:"setLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!(de(this,be)&&e&&e.score&&e.leaderboardName))return Promise.reject();var r=this._getPromiseDecorator(y);return r||(r=this._createPromiseDecorator(y),"string"==typeof e.score&&(e.score=parseInt(e.score)),de(this,be).setLeaderboardScore(e.leaderboardName,e.score).then((function(){t._resolvePromiseDecorator(y)})).catch((function(e){t._rejectPromiseDecorator(y,e)}))),r.promise}},{key:"getLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!de(this,be)||!e||!e.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(h);return r||(r=this._createPromiseDecorator(h),de(this,be).getLeaderboardPlayerEntry(e.leaderboardName).then((function(e){t._resolvePromiseDecorator(h,e.score)})).catch((function(e){t._rejectPromiseDecorator(h,e)}))),r.promise}},{key:"getLeaderboardEntries",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!de(this,be)||!e||!e.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(d);if(!r){r=this._createPromiseDecorator(d);var o={includeUser:!1,quantityAround:5,quantityTop:5};"boolean"==typeof e.includeUser&&(o.includeUser=e.includeUser),"string"==typeof e.quantityAround&&(e.quantityAround=parseInt(e.quantityAround)),"number"==typeof e.quantityAround&&(o.quantityAround=e.quantityAround),"string"==typeof e.quantityTop&&(e.quantityTop=parseInt(e.quantityTop)),"number"==typeof e.quantityTop&&(o.quantityTop=e.quantityTop),de(this,be).getLeaderboardEntries(e.leaderboardName,o).then((function(e){var r=null;e&&e.entries.length>0&&(r=e.entries.map((function(e){var t=[],r=e.player.getAvatarSrc("small"),o=e.player.getAvatarSrc("medium"),n=e.player.getAvatarSrc("large");return r&&t.push(r),o&&t.push(o),n&&t.push(n),{id:e.player.uniqueID,score:e.score,rank:e.rank,name:e.player.publicName,photos:t}}))),t._resolvePromiseDecorator(d,r)})).catch((function(e){t._rejectPromiseDecorator(d,e)}))}return r.promise}}])&&oe(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),b}(N);function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){Ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ae(){return Ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=Te(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},Ae.apply(this,arguments)}function Te(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Le(e)););return e}function Re(e,t){return Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Re(e,t)}function Ie(e,t){if(t&&("object"===Pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Le(e)}const Ce=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Re(e,t)}(c,t);var r,o,n,i,a=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Le(n);if(i){var r=Le(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ie(this,e)});function c(){return je(this,c),a.apply(this,arguments)}return r=c,(o=[{key:"platformId",get:function(){return e.TGG}},{key:"platformLanguage",get:function(){return"en"}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(u);return t||(t=this._createPromiseDecorator(u),F("https://storage.yandexcloud.net/tgg-sdk/v1.2.0/tggsdk.js").then((function(){e._platformSdk=window.tggsdk,e._platformSdk.initialize().then((function(){e._platformSdk.player.getData().then((function(t){e._playerId=t.id,e._playerName=t.name})).finally((function(){e._isInitialized=!0,e._defaultStorageType=m.PLATFORM_INTERNAL,e._resolvePromiseDecorator(u)}))})).catch((function(t){return e._rejectPromiseDecorator(u,t)}))}))),t.promise}},{key:"authorizePlayer",value:function(e){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===m.PLATFORM_INTERNAL||Ae(Le(c.prototype),"isStorageSupported",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t){var r=this;return t===m.PLATFORM_INTERNAL?new Promise((function(t,o){if(r._platformStorageCachedData){if(Array.isArray(e)){for(var n=[],i=0;i<e.length;i++){var a=void 0===r._platformStorageCachedData[e[i]]?null:r._platformStorageCachedData[e[i]];n.push(a)}return void t(n)}t(void 0===r._platformStorageCachedData[e]?null:r._platformStorageCachedData[e])}else r._platformSdk.game.getData().then((function(o){if(r._platformStorageCachedData=o,Array.isArray(e)){for(var n=[],i=0;i<e.length;i++){var a=void 0===r._platformStorageCachedData[e[i]]?null:r._platformStorageCachedData[e[i]];n.push(a)}t(n)}else t(void 0===r._platformStorageCachedData[e]?null:r._platformStorageCachedData[e])})).catch((function(e){o(e)}))})):Ae(Le(c.prototype),"getDataFromStorage",this).call(this,e,t)}},{key:"setDataToStorage",value:function(e,t,r){var o=this;return r===m.PLATFORM_INTERNAL?new Promise((function(r,n){var i=null!==o._platformStorageCachedData?Oe({},o._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;o._platformSdk.game.setData(i).then((function(){o._platformStorageCachedData=i,r()})).catch((function(e){return n(e)}))})):Ae(Le(c.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===m.PLATFORM_INTERNAL?new Promise((function(t,o){var n=null!==r._platformStorageCachedData?Oe({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete n[e[i]];else delete n[e];r._platformSdk.game.setData(n).then((function(){r._platformStorageCachedData=n,t()})).catch((function(e){return o(e)}))})):Ae(Le(c.prototype),"deleteDataFromStorage",this).call(this,e,t)}}])&&De(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),c}(N);function Be(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const Ne=function(){function e(t){var r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=void 0,(r="_platformBridge")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this._platformBridge=t}var t,r;return t=e,(r=[{key:"initialize",value:function(){return Promise.resolve()}}])&&Be(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Fe(e){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(e)}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ge(e,t){return Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ge(e,t)}function We(e,t){if(t&&("object"===Fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function xe(e){return xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xe(e)}const Ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xe(o);if(n){var r=xe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return We(this,e)});function a(){return Me(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"id",get:function(){return this._platformBridge.platformId}},{key:"sdk",get:function(){return this._platformBridge.platformSdk}},{key:"language",get:function(){return this._platformBridge.platformLanguage}},{key:"payload",get:function(){return this._platformBridge.platformPayload}}])&&ze(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ne);function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ye(e,t){return Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ye(e,t)}function Ue(e,t){if(t&&("object"===He(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Je(e){return Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Je(e)}const Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Je(o);if(n){var r=Je(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ue(this,e)});function a(){return Ke(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isAuthorizationSupported",get:function(){return this._platformBridge.isPlayerAuthorizationSupported}},{key:"isAuthorized",get:function(){return this._platformBridge.isPlayerAuthorized}},{key:"id",get:function(){return this._platformBridge.playerId}},{key:"name",get:function(){return this._platformBridge.playerName}},{key:"photos",get:function(){return this._platformBridge.playerPhotos}},{key:"authorize",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.authorize(t)}return this._platformBridge.authorizePlayer(e)}}])&&qe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ne);function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function Ze(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $e(e,t){return $e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$e(e,t)}function et(e,t){if(t&&("object"===Qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function tt(e){return tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tt(e)}var rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$e(e,t)}(u,e);var t,r,n,i,a=(n=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tt(n);if(i){var r=tt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return et(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e))._platformBridge.on(o.VISIBILITY_STATE_CHANGED,(function(e){return t.emit(o.VISIBILITY_STATE_CHANGED,e)})),t}return t=u,(r=[{key:"visibilityState",get:function(){return this._platformBridge.visibilityState}}])&&Ze(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(Ne);D().mixin(rt.prototype);const ot=rt;function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ut(e,t){return ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ut(e,t)}function ct(e,t){if(t&&("object"===nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return st(e)}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}function ft(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function pt(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var yt=new WeakMap;const ht=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ut(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=lt(o);if(n){var r=lt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ct(this,e)});function a(){var e;it(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return ft(st(e=i.call.apply(i,[this].concat(r))),yt,{writable:!0,value:[]}),e}return t=a,(r=[{key:"defaultType",get:function(){return this._platformBridge.defaultStorageType}},{key:"isSupported",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageSupported(e)}},{key:"get",value:function(e,t){var r=this;if(t){var o=t[this._platformBridge.platformId];if(o)return this.get(e,o)}var n=t;n||(n=this.defaultType);var i=pt(this,yt)[n];return i&&void 0!==i[e]?Promise.resolve(i[e]):this._platformBridge.getDataFromStorage(e,n).then((function(t){return r._addToCache(n,e,t),t}))}},{key:"set",value:function(e,t,r){var o=this;if(r){var n=r[this._platformBridge.platformId];if(n)return this.set(e,t,n)}var i=r;return i||(i=this.defaultType),this._platformBridge.setDataToStorage(e,t,i).then((function(){return o._addToCache(i,e,t)}))}},{key:"delete",value:function(e,t){var r=this;if(t){var o=t[this._platformBridge.platformId];if(o)return this.delete(e,o)}var n=t;return n||(n=this.defaultType),this._platformBridge.deleteDataFromStorage(e,n).then((function(){return r._deleteFromCache(n,e)}))}},{key:"_addToCache",value:function(e,t,r){if(pt(this,yt)[e]||(pt(this,yt)[e]=[]),Array.isArray(t))for(var o=0;o<t.length;o++)pt(this,yt)[e][t[o]]=r[t[o]];else pt(this,yt)[e][t]=r}},{key:"_deleteFromCache",value:function(e,t){if(pt(this,yt)[e])if(Array.isArray(t))for(var r=0;r<t.length;r++)delete pt(this,yt)[e][t[r]];else delete pt(this,yt)[e][t]}}])&&at(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ne);function dt(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function mt(e,t){gt(e,t),t.add(e)}function vt(e,t,r){gt(e,t),t.set(e,r)}function gt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function bt(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function _t(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,wt(e,t,"set"),r),r}function St(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,wt(e,t,"get"))}function wt(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Pt="created",kt="completed",Ot=new WeakMap,Et=new WeakMap,jt=new WeakMap,Dt=new WeakMap,At=new WeakSet,Tt=new WeakSet,Rt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),mt(this,Tt),mt(this,At),vt(this,Ot,{writable:!0,value:0}),vt(this,Et,{writable:!0,value:0}),vt(this,jt,{writable:!0,value:Pt}),vt(this,Dt,{writable:!0,value:0}),_t(this,Ot,t)}var t,r;return t=e,(r=[{key:"state",get:function(){return St(this,jt)}},{key:"start",value:function(){var e=this;switch(St(this,jt)){case Pt:case kt:_t(this,Et,St(this,Ot)),bt(this,At,It).call(this,"started"),_t(this,Dt,setInterval((function(){_t(e,Et,St(e,Et)-1),e.emit("time_left_changed",St(e,Et)),St(e,Et)<=0&&(bt(e,Tt,Lt).call(e),bt(e,At,It).call(e,kt))}),1e3))}}},{key:"stop",value:function(){bt(this,Tt,Lt).call(this),bt(this,At,It).call(this,"stopped")}}])&&dt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function It(e){_t(this,jt,e),this.emit("state_changed",St(this,jt))}function Lt(){_t(this,Et,0),clearInterval(St(this,Dt))}D().mixin(Rt.prototype);const Ct=Rt;function Bt(e){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bt(e)}function Nt(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ft(e,t){return Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ft(e,t)}function Mt(e,t){if(t&&("object"===Bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zt(e)}function zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gt(e){return Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Gt(e)}function Wt(e,t,r){xt(e,t),t.set(e,r)}function xt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Vt(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Ht(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,qt(e,t,"set"),r),r}function Kt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,qt(e,t,"get"))}function qt(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Yt=new WeakMap,Ut=new WeakMap,Jt=new WeakSet,Xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ft(e,t)}(u,e);var t,r,n,i,a=(n=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Gt(n);if(i){var r=Gt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Mt(this,e)});function u(e){var t,r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),xt(r=zt(t=a.call(this,e)),n=Jt),n.add(r),Wt(zt(t),Yt,{writable:!0,value:void 0}),Wt(zt(t),Ut,{writable:!0,value:60}),t._platformBridge.on(o.INTERSTITIAL_STATE_CHANGED,(function(e){return t.emit(o.INTERSTITIAL_STATE_CHANGED,e)})),t._platformBridge.on(o.REWARDED_STATE_CHANGED,(function(e){return t.emit(o.REWARDED_STATE_CHANGED,e)})),t}return t=u,(r=[{key:"interstitialState",get:function(){return this._platformBridge.interstitialState}},{key:"rewardedState",get:function(){return this._platformBridge.rewardedState}},{key:"minimumDelayBetweenInterstitial",get:function(){return Kt(this,Ut)}},{key:"setMinimumDelayBetweenInterstitial",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.setMinimumDelayBetweenInterstitial(t)}var r=Bt(e),o=Kt(this,Ut);switch(r){case"number":o=e;break;case"string":if(o=parseInt(e),isNaN(o))return}Ht(this,Ut,o),Kt(this,Yt)&&(Kt(this,Yt).stop(),Vt(this,Jt,Qt).call(this))}},{key:"showInterstitial",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.showInterstitial(t)}var r=!1;return e&&"boolean"==typeof e.ignoreDelay&&(r=e.ignoreDelay),Kt(this,Yt)&&Kt(this,Yt).state!==kt&&!r?Promise.reject():(Kt(this,Ut)>0&&Vt(this,Jt,Qt).call(this),this._platformBridge.showInterstitial())}},{key:"showRewarded",value:function(){return this._platformBridge.showRewarded()}}])&&Nt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(Ne);function Qt(){Ht(this,Yt,new Ct(Kt(this,Ut))),Kt(this,Yt).start()}D().mixin(Xt.prototype);const Zt=Xt;function $t(e){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(e)}function er(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tr(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function rr(e,t){return rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rr(e,t)}function or(e,t){if(t&&("object"===$t(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function nr(e){return nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},nr(e)}const ir=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rr(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=nr(o);if(n){var r=nr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return or(this,e)});function a(){return er(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isInviteFriendsSupported",get:function(){return this._platformBridge.isInviteFriendsSupported}},{key:"isJoinCommunitySupported",get:function(){return this._platformBridge.isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._platformBridge.isShareSupported}},{key:"isCreatePostSupported",get:function(){return this._platformBridge.isCreatePostSupported}},{key:"isAddToHomeScreenSupported",get:function(){return this._platformBridge.isAddToHomeScreenSupported}},{key:"isAddToFavoritesSupported",get:function(){return this._platformBridge.isAddToFavoritesSupported}},{key:"isRateSupported",get:function(){return this._platformBridge.isRateSupported}},{key:"inviteFriends",value:function(){return this._platformBridge.inviteFriends()}},{key:"joinCommunity",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.joinCommunity(t)}return this._platformBridge.joinCommunity(e)}},{key:"share",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.share(t)}return this._platformBridge.share(e)}},{key:"createPost",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.createPost(t)}return this._platformBridge.createPost(e)}},{key:"addToHomeScreen",value:function(){return this._platformBridge.addToHomeScreen()}},{key:"addToFavorites",value:function(){return this._platformBridge.addToFavorites()}},{key:"rate",value:function(){return this._platformBridge.rate()}}])&&tr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ne);function ar(e){return ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ar(e)}function ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cr(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function sr(e,t){return sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},sr(e,t)}function lr(e,t){if(t&&("object"===ar(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function fr(e){return fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fr(e)}const pr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sr(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fr(o);if(n){var r=fr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return lr(this,e)});function a(){return ur(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"type",get:function(){return this._platformBridge.deviceType}}])&&cr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ne);function yr(e){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr(e)}function hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dr(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function mr(e,t){return mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},mr(e,t)}function vr(e,t){if(t&&("object"===yr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function gr(e){return gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},gr(e)}const br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mr(e,t)}(a,e);var t,r,o,n,i=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gr(o);if(n){var r=gr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return vr(this,e)});function a(){return hr(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isLeaderboardSupported}},{key:"isNativePopupSupported",get:function(){return this._platformBridge.isLeaderboardNativePopupSupported}},{key:"isMultipleBoardsSupported",get:function(){return this._platformBridge.isLeaderboardMultipleBoardsSupported}},{key:"isSetScoreSupported",get:function(){return this._platformBridge.isLeaderboardSetScoreSupported}},{key:"isGetScoreSupported",get:function(){return this._platformBridge.isLeaderboardGetScoreSupported}},{key:"isGetEntriesSupported",get:function(){return this._platformBridge.isLeaderboardGetEntriesSupported}},{key:"setScore",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.setScore(t)}return this._platformBridge.setLeaderboardScore(e)}},{key:"getScore",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getScore(t)}return this._platformBridge.getLeaderboardScore(e)}},{key:"getEntries",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getEntries(t)}return this._platformBridge.getLeaderboardEntries(e)}},{key:"showNativePopup",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.showNativePopup(t)}return this._platformBridge.showLeaderboardNativePopup(e)}}])&&dr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ne);function _r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Sr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wr(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Pr(e,t){Or(e,t),t.add(e)}function kr(e,t,r){Or(e,t),t.set(e,r)}function Or(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Er(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Ar(e,t,"set"),r),r}function jr(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Dr(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ar(e,t,"get"))}function Ar(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Tr=new WeakMap,Rr=new WeakMap,Ir=new WeakMap,Lr=new WeakMap,Cr=new WeakMap,Br=new WeakSet,Nr=new WeakSet;function Fr(){var t=e.MOCK;if(this._options&&this._options.forciblySetPlatformId)switch(this._options.forciblySetPlatformId){case e.VK:t=e.VK;break;case e.YANDEX:t=e.YANDEX;break;case e.TGG:t=e.TGG}else{var r=new URL(window.location.href),o=["y","a","n","d","e","x",".","n","e","t"].join("");r.hostname.includes(o)||r.hash.includes("yandex")?t=e.YANDEX:r.searchParams.has("api_id")&&r.searchParams.has("viewer_id")&&r.searchParams.has("auth_key")?t=e.VK:r.searchParams.has("platform")&&r.searchParams.get("platform")===e.TGG&&(t=e.TGG)}switch(t){case e.VK:Er(this,Ir,new Q(this._options&&this._options.platforms&&this._options.platforms.vk));break;case e.YANDEX:Er(this,Ir,new we(this._options&&this._options.platforms&&this._options.platforms.yandex));break;case e.TGG:Er(this,Ir,new Ce(this._options&&this._options.platforms&&this._options.platforms.tgg));break;case e.MOCK:Er(this,Ir,new N)}}function Mr(e){return Dr(this,Cr)[e]?Dr(this,Cr)[e]:Dr(this,Lr)[e]}const zr=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),Pr(this,Nr),Pr(this,Br),kr(this,Tr,{writable:!0,value:!1}),kr(this,Rr,{writable:!0,value:null}),kr(this,Ir,{writable:!0,value:null}),kr(this,Lr,{writable:!0,value:{}}),kr(this,Cr,{writable:!0,value:{}})}var u,c;return u=r,c=[{key:"version",get:function(){return"1.5.2"}},{key:"isInitialized",get:function(){return Dr(this,Tr)}},{key:"platform",get:function(){return jr(this,Nr,Mr).call(this,t.PLATFORM)}},{key:"player",get:function(){return jr(this,Nr,Mr).call(this,t.PLAYER)}},{key:"game",get:function(){return jr(this,Nr,Mr).call(this,t.GAME)}},{key:"storage",get:function(){return jr(this,Nr,Mr).call(this,t.STORAGE)}},{key:"advertisement",get:function(){return jr(this,Nr,Mr).call(this,t.ADVERTISEMENT)}},{key:"social",get:function(){return jr(this,Nr,Mr).call(this,t.SOCIAL)}},{key:"device",get:function(){return jr(this,Nr,Mr).call(this,t.DEVICE)}},{key:"leaderboard",get:function(){return jr(this,Nr,Mr).call(this,t.LEADERBOARD)}},{key:"PLATFORM_ID",get:function(){return e}},{key:"MODULE_NAME",get:function(){return t}},{key:"EVENT_NAME",get:function(){return o}},{key:"INTERSTITIAL_STATE",get:function(){return i}},{key:"REWARDED_STATE",get:function(){return a}},{key:"STORAGE_TYPE",get:function(){return m}},{key:"VISIBILITY_STATE",get:function(){return n}},{key:"initialize",value:function(e){var r=this;return Dr(this,Tr)?Promise.resolve():(Dr(this,Rr)||(Er(this,Rr,new E),this._options=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(r),!0).forEach((function(t){Sr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),jr(this,Br,Fr).call(this),Dr(this,Ir).initialize().then((function(){Dr(r,Lr)[t.PLATFORM]=new Ve(Dr(r,Ir)),Dr(r,Lr)[t.PLAYER]=new Xe(Dr(r,Ir)),Dr(r,Lr)[t.GAME]=new ot(Dr(r,Ir)),Dr(r,Lr)[t.STORAGE]=new ht(Dr(r,Ir)),Dr(r,Lr)[t.ADVERTISEMENT]=new Zt(Dr(r,Ir)),Dr(r,Lr)[t.SOCIAL]=new ir(Dr(r,Ir)),Dr(r,Lr)[t.DEVICE]=new pr(Dr(r,Ir)),Dr(r,Lr)[t.LEADERBOARD]=new br(Dr(r,Ir)),Er(r,Tr,!0),console.log("%c InstantGamesBridge v."+r.version+" initialized. ","background: #01A5DA; color: white"),Dr(r,Rr)&&(Dr(r,Rr).resolve(),Er(r,Rr,null))}))),Dr(this,Rr).promise)}},{key:"overrideModule",value:function(e,t){if(Dr(this,Tr)){var r=Dr(this,Lr)[e];r&&(Dr(this,Cr)[e]=t,"function"==typeof t.initialize&&t.initialize(r))}}}],c&&wr(u.prototype,c),Object.defineProperty(u,"prototype",{writable:!1}),r}();window.instantGamesBridge=window.bridge=new zr})()})();
